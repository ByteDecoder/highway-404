<style>body{margin:0;text-align:center;background:#000;touch-action:none}</style><canvas id=c></canvas><script>(()=>{const e=/iPhone|iPad|Android/i.test(navigator.userAgent),t=new(top.AudioContext||webkitAudioContext),a=(e=1,t=.05,a=220,n=0,i=0,o=.1,h=0,s=1,r=0,c=0,d=0,g=0,w=0,l=0,m=0,A=0,y=0,p=1,u=0,f=44100,x=99+n*f,v=i*f,I=o*f,E=u*f,T=y*f,k=2*Math.PI,M=(e=>e>0?1:-1),X=x+E+v+I+T,b=(r*=500*k/f**2),R=(a*=(1+2*t*Math.random()-t)*k/f),z=M(m)*k/4,C=0,Y=0,J=0,P=0,S=0,K=0,Q=1,F=[])=>{for(;X>J;F[J++]=K)++S>100*A&&(S=0,K=C*a*Math.sin(Y*m*k/f-z),K=M(K=h?h>1?h>2?h>3?Math.sin((K%k)**3):Math.max(Math.min(Math.tan(K),1),-1):1-(2*K/k%2+2)%2:1-4*Math.abs(Math.round(K/k)-K/k):Math.sin(K))*Math.abs(K)**s*e*.3*(x>J?J/x:x+E>J?1-(J-x)/E*(1-p):x+E+v>J?p:X-T>J?(X-J-T)/I*p:0),K=T?K/2+(T>J?0:(X-T>J?1:(J-X)/T)*F[J-T|0]/2):K),C+=1-l+1e9*(Math.sin(J)+1)%2*l,Y+=1-l+1e9*(Math.sin(J)**2+1)%2*l,a+=r+=500*c*k/f**3,Q&&++Q>g*f&&(a+=d*k/f,R+=d*k/f,Q=0),w&&++P>w*f&&(a=R,r=b,P=1,Q=Q||1);return F},n=e=>((...e)=>{let a=t.createBufferSource(),n=t.createBuffer(e.length,e[0].length,44100);return e.map((e,t)=>n.getChannelData(t).set(e)),a.buffer=n,a.connect(t.destination),a.start(),a})(...e);function i(e,t,a){return e>a?0:a>t?1:(a-e)/(t-e)}const o={},h=e=>localStorage.getItem("2020.highway-404."+e);let s="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANwAAAAFAQMAAAAUpRAlAAAABlBMVEUAAAD///+l2Z/dAAAAAXRSTlMAQObYZgAAAJxJREFUCNcBkQBu/wD/v8//8fhjCMXed5/4xjGP3Ed6X3/c4ACAyAKgAIxhKEIRIGUN5jGMYEjGKlCiyIZQgGMQEIDQBfAA/6Eecv8geQrWMo+cSMakISJBG/7wnPAAjiAIoACMYRhCMSRlCM48lEJIqqoiIkIEQYkiEBAAWRHwAI+f78Hx/+P4xdB8fEcR0Sfc7/hecR3iAICaIKCD0ULSdqTUvwAAAABJRU5ErkJggg==";function r(e,t,a,n,i=0,o=1){const h=5*o,r=e.length*(o+h),c=2===i?r:1===i?r/2:0;[...e].forEach((e,i)=>{t.drawImage(s,5*"abcdefghijklmnopqrstuvwxyz0123456789.:!-%,/#".indexOf(e),0,5,5,a+i*(h+1)-c,n,h,h)})}const d=[38,38,40,40,37,39,37,39,66,65];let g,w,l,m,A,y,p,u,f=0,x=0;const v=[[0,6,6],[1,5,5,5],[2,5,5,5],[2,5,5,5],[2,5,5,5],[2,5,5,5],[3,5,5,5],[7,4,7]];let I,E,T=[[[,0,77,,,.7,2,.41,,,,,,,,.06],[,0,43,.01,,.3,2,,,,,,,,,.02,.01],[,0,170,.003,,.008,,.97,-35,53,,,,,,.1],[.8,0,270,,,.12,3,1.65,-2,,,,,4.5,,.02],[,0,86,,,,,.7,,,,.5,,6.7,1,.05],[,0,41,,.05,.4,2,0,,,9,.01,,,,.08,.02],[,0,2200,,,.04,3,2,,,800,.02,,4.8,,.01,.1],[.3,0,16,,,.3,3]],[[[1,-1,21,21,33,21,21,33,21,21,33,21,21,33,21,21,33,33,21,21,33,21,21,33,21,21,33,21,21,33,21,21,33,33,21,21,33,21,21,33,21,21,33,21,21,33,21,21,33,33,21,21,33,21,21,33,21,21,33,21,21,33,21,21,33,33],[3,1,22,,,,,,,,,,,,,,,,,,,,,,,,,,,,24,,,,24,,,,,,,,,,,,,,,,,,,,,,,,22,,22,,22,,,,],[5,-1,21,,,,,,,,,,,,,,,,,,,,,,,,,,,,24,,,,23,,,,,,,,,,,,,,,,,,,,,,,,24,,23,,21,,,,],[,1,21,,,,,,,,,,,,,,,,,,,,,,,,,,,,24,,,,23,,,,,,,,,,,,,,,,,,,,,,,,24,,23,,21,,,,]],[[1,-1,21,21,33,21,21,33,21,21,33,21,21,33,21,21,33,33,21,21,33,21,21,33,21,21,33,21,21,33,21,21,33,33,21,21,33,21,21,33,21,21,33,21,21,33,21,21,33,33,21,21,33,21,21,33,21,21,33,21,21,33,21,21,33,33],[3,1,24,,,,,,,,27,,,,,,,,,,,,,,,,27,,,,24,,,,24,,,,,,,,27,,,,,,,,,,,,,,,,24,,24,,24,,,,],[5,-1,21,,,,,,,,,,,,,,,,,,,,,,,,,,,,24,,,,23,,,,,,,,,,,,,,,,,,,,,,,,24,,23,,21,,,,],[,1,21,,,,,,,,,,,,,,,,,,,,,,,,,,,,24,,,,23,,,,,,,,,,,,,,,,,,,,,,,,24,,23,,21,,,,],[6,1,,,34,34,34,,,,,,34,34,,,,,34,,,,34,34,,,,,34,,,,34,,,,34,34,34,,,,,,34,,,,,,34,34,,,34,34,,,,,,,,,34,34],[4,1,,,,,,,24,,,,,,24,,24,,,,24,,,,24,,,,,,,,,,,,,,,,24,,,,,,24,,24,,,,24,,,,24,,,,,,,,,,]],[[1,-1,21,21,33,21,21,33,21,21,33,21,21,33,21,21,33,33,21,21,33,21,21,33,21,21,33,21,21,33,21,21,33,33,23,23,35,23,23,36,23,23,35,23,23,36,23,23,35,35,23,23,35,23,23,35,23,23,36,23,23,35,23,23,36,36],[5,-1,21,,,19,,,21,,,,,,,,,,21,,,19,,,17,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],[3,1,24,,,24,,,24,,,,,,,,,,24,,,24,,,24,,,,24.75,24.5,24.26,24.01,24.01,24.01,,,,,25,,,,,,,,25,,,,,,,,25,,,,,,,,25,25,25,25],[4,-1,,,,,,,,,,,,,,,,,,,,,,,,,,,24.75,24.5,24.26,24.01,24.01,24.01,24.01,24,,24,24,,24,24,24,24,,24,24,,24,,24,24,,24,24,,24,24,24,24,,24,24,,24,24],[7,-1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,23,,21,23,,35,,23,,21,23,,35,,35,,23,,21,23,,35,,21,23,,35,,21,23,,,],[6,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,34,36,34,,33,34,34,36,31,36,34,,31,34,32,,33,36,34,,31,34,34,36,33,36,33,,31,,,]],[[1,-1,21,21,33,21,21,33,21,21,33,21,21,33,21,21,33,33,21,21,33,21,21,33,21,21,33,21,21,33,21,21,33,33,17,17,29,17,17,29,17,17,29,17,17,29,17,17,29,29,17,17,29,17,17,29,17,17,29,17,17,29,17,17,29,29],[4,1,24,24,,24,24,,24,24,24,24,,24,24,,24,,24,24,,24,24,,24,24,24,24,,24,24,,24,24,24,24,,24,24,,24,24,24,,,24,24,,24,,24,24,,24,24,,24,24,24,24,,24,24,,24,24],[7,-1,21,,19,21,,33,,21,,19,21,,33,,33,,21,,19,21,,33,,21,,19,21,,33,,33,,17,,17,17,29,17,17,29,17,,17,17,29,17,17,29,17,,17,17,29,17,17,29,17,,17,17,29,17,17,29],[2,1,,34,34,34,,34,34,34,,34,34,34,,34,34,34,,34,34,34,,34,34,34,,34,34,34,,34,,,,34,34,34,,34,34,34,,34,34,34,,34,34,34,,34,34,34,,34,34,34,,34,34,34,,34,,,],[6,1,,,36,,,,,,36,,36,,,,,,,,36,,,,,,36,,36,,,,,,,,36,,,,,,,,,,,,,,,,36,,,,,,36,,36,,,,,,],[3,1,,,,,25,,,,,,,,25,,,,,,,,25,,,,,,,,25,25,25,25,,,,,25,,,,,25,,,25,,,,,,,,25,,,,,,,,25,25,25,25]],[[1,-1,14,14,26,14,14,26,14,14,26,14,14,26,14,14,26,26,14,14,26,14,14,26,14,14,26,14,14,26,14,14,26,26,17,17,29,17,17,29,17,17,29,17,17,29,17,17,29,29,19,19,31,19,19,31,19,19,31,19,19,31,19,19,31,31],[4,1,24,24,,24,24,,24,24,24,24,,24,24,,24,,24,24,,24,24,,24,24,24,24,,24,24,,24,24,24,24,,24,24,,24,24,24,24,,24,24,,36,,24,24,,24,24,,24,24,24,24,,24,24,,24,24],[7,-1,14,,14,14,26,14,14,26,14,,14,14,26,14,14,26,14,,14,14,26,14,14,26,14,,14,14,26,14,14,26,17,,17,17,29,17,17,29,17,,17,17,29,17,17,29,19,,19,19,31,19,19,31,19,,19,19,31,19,19,31],[2,1,,36,36,36,,36,36,36,,36,36,36,,36,36,36,,36,36,36,,36,36,36,,36,36,36,,36,,,,36,36,36,,36,36,36,,36,36,36,,36,36,36,,36,36,36,,36,36,36,,36,36,36,,36,,,],[3,1,,,,,25,,,,,,,,25,,,,,,,,25,,,,,,,,25,25,25,25,,,,,25,,,,,,,,25,,,,,,,,25,,,,,,,,25,25,25,25],[6,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,34,,,,,,34,,34,,,,,,,,34,,,,,,34,,34,,,,,,]]],[0,1,1,2,3,4,4],,{title:"Depp",instruments:["Instrument 0","Instrument 1","Instrument 2","Instrument 3","Instrument 4","Instrument 5","Instrument 6","Instrument 7"],patterns:["Pattern 0","Pattern 1","Pattern 2","Pattern 3","Pattern 4"]}];const k=c.getContext("2d"),M=c.cloneNode(),X=M.getContext("2d");M.width=160,M.height=400;const b=c.cloneNode(),R=b.getContext("2d");b.width=120,b.height=160;const z=b.width-50;let C=0,Y=0;const J={hero:{sprites:[{x:0,y:0,w:10,h:20}],speed:{x:100,y:50}},fallingRoad:{sprites:[{x:40,y:0,w:20,h:20},{x:60,y:0,w:20,h:20},{x:80,y:0,w:20,h:20},{x:100,y:0,w:20,h:20},{x:120,y:0,w:20,h:20},{x:140,y:0,w:20,h:20}]},missingRoad:{sprites:[{x:140,y:0,w:20,h:20}]},highwayPanel:{sprites:[{x:0,y:40,w:M.width,h:40}]},highway:{0:[{x:0,y:20,w:20,h:20}],6:[{x:20,y:20,w:20,h:20}],1:[{x:40,y:20,w:20,h:20}],2:[{x:60,y:20,w:20,h:20}],3:[{x:80,y:20,w:20,h:20}],4:[{x:100,y:20,w:20,h:20}],7:[{x:120,y:20,w:20,h:20}],5:[{x:140,y:20,w:20,h:20}],speed:{y:200}}};let P,S,K,Q,F="data:image/png;base64,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",D=!0;function N(){J.hero.sprites[0].x+=10}function W(){l=[w=G("hero",b.width/2,M.height-50),G("highwayPanel",0,M.height-b.height+15)],C=0,Y=M.height-b.height}function B(){f=0,g=404,A=0,u=0,y=[{distance:808,type:"404",lane:1},{distance:808,type:"404",lane:2},{distance:808,type:"404",lane:3},{distance:808,type:"501",lane:4,length:20},{distance:808,type:"501",lane:5,length:19},{distance:808,type:"501",lane:6,length:18},{distance:1700,type:"200",lane:1},{distance:1720,type:"200",lane:2},{distance:1740,type:"200",lane:3},{distance:1580,type:"503",lane:4,length:20},{distance:1560,type:"503",lane:5,length:19},{distance:1540,type:"503",lane:6,length:18},{distance:2400,type:"100",lane:1},{distance:2400,type:"100",lane:2},{distance:2400,type:"100",lane:3},{distance:2400,type:"100",lane:4},{distance:2400,type:"100",lane:5},{distance:2400,type:"100",lane:6},{distance:3200,type:"503",lane:1,length:20}],p=!1,E=n(T),E.loop=!0,x=1}function U(e,t){return t.x+t.w>e.x+e.w/4&&e.x+3*e.w/4>t.x&&t.y+t.h>e.y+e.h/4&&e.y+3*e.h/4>t.y}function G(e,t=0,a=0,n=!1){if(J[e]){const i=J[e].sprites[0];return{frame:0,frameTime:0,h:i.h,loopAnimation:n,moveX:0,moveY:0,rotate:0,scale:1,speed:J[e].speed,sprites:J[e].sprites,type:e,w:i.w,x:t,y:a}}return{h:20,type:e,w:20,x:t,y:a}}function O(e){const t=G("fallingRoad",e.x,e.y-e.h);return t.spawn=O,t.spawnTime=g,t}function j(e){if(e.frameTime+=S,e.frameTime>.1&&(e.frameTime-=.1,(e.sprites.length-1>e.frame||e.loopAnimation)&&(e.frame+=1),e.loopAnimation&&(e.frame%=e.sprites.length),e.dying&&(e.rotate+=.7853981633974483,e.scale-=.1,0>e.scale&&(e.scale=0,e.dying=!1,e.dead=!0))),e.speed&&!e.dying){const t=e.moveX&&e.moveY?.7071067811865476:1;e.x+=e.speed.x*S*e.moveX*t,e.y+=e.speed.y*S*e.moveY*t}}function q(){k.drawImage(b,0,0,b.width,b.height,0,0,c.width,c.height)}function L(e){if(e.sprites){const t=e.sprites[e.frame];R.save(),R.translate(Math.round(e.x-C),Math.round(e.y-Y));let a=0,n=0;e.dying?(R.translate(Math.round(e.w/2),Math.round(e.h/2)),R.rotate(e.rotate),a=-e.w/2*e.scale,n=-e.h/2*e.scale):e.moveX&&(R.translate(Math.round(e.w/2),Math.round(e.h/2)),R.rotate(.19634954084936207*e.moveX),a=-e.w/2*e.scale,n=-e.h/2*e.scale),R.drawImage(F,t.x,t.y,t.w,t.h,a,n,t.w*e.scale,t.h*e.scale),R.restore()}else r(e.type,R,Math.round(e.x+10-C),Math.round(e.y+e.h/2-2.5-Y),1)}function H(){R.drawImage(M,C,Y,b.width,b.height,0,0,b.width,b.height)}function Z(){D&&(Q=requestAnimationFrame(Z),(()=>{switch(x){case 0:H(),l.forEach(L),r("js13kgames 2020",R,b.width/2,5,1),r(e?"swipe to start":"press any key",R,b.width/2,(b.height+10)/2,1),r("jerome lecomte",R,b.width/2,b.height-10,1);break;case 1:H(),l.forEach(L),r("highway 404",R,5,5),(()=>{const e=Math.floor(Math.ceil(g)/60),t=Math.ceil(g)-60*e;r(`${e}:${t>9?"":"0"}${t}`,R,b.width-5,5,2)})();break;case 2:H(),l.forEach(L),r("highscore",R,5,5),r(h("highscore")+" sec",R,b.width-5,5,2),r(p?"you arrived!":"you got lost!",R,b.width/2,b.height/3,1)}q()})(),P=Date.now(),S=(P-K)/1e3,(()=>{switch(x){case 1:g-=S,0>g&&(p=!0,E.stop(),x=2),w.dead&&(p=!1,t=Math.max(h("highscore")||13,Math.floor(404-g)),localStorage.setItem("2020.highway-404.highscore",t),E.stop(),x=2),u=w.dying?1-i(0,1.5,w.dyingTime-g):i(0,1.5,404-g),l.forEach(j),A+=(()=>{const e=J.highway.speed.y*S*u;return Y-=e,w.y-=e,0>Y&&(Y+=M.height-b.height,l.forEach(e=>{e.y+=M.height-b.height})),e})(),20>(e=w).x?e.x=20:e.x>M.width-20-e.w&&(e.x=M.width-20-e.w),Y+20>e.y?e.y=Y+20:e.y>Y+b.height-e.h&&(e.y=Y+b.height-e.h),C>0&&C+50>w.x?C=Math.max(0,w.x-50):M.width-b.width>C&&w.x+w.w>C+z&&(C=Math.min(M.width-b.width,w.x+w.w-z)),m=[];const a=new Set;(e=>{y=y.filter(t=>{if(t.distance>A&&A+20>t.distance){e.push(G(t.type,20*t.lane,-20+Y));for(let a=1;t.length>=a;a++)e.push(G("missingRoad",20*t.lane,-20*(a+2)+Y));return!1}return!0})})(m),(()=>{const e=l.filter(e=>"200"===e.type);l.forEach(t=>{if(t.spawn&&t.spawnTime-g>.083){const a=t.spawn(t);m.push(a),t.spawn=null,e.forEach(e=>{U(a,e)&&(a.spawn=null)})}})})(),l.forEach(e=>{if(e!==w&&!e.triggered&&U(w,e))switch(e.type){case"100":e.triggered=!0,a.add("continue");break;case"200":e.triggered=!0,a.add("road OK");break;case"404":e.triggered=!0,m.push(O({x:e.x,y:e.y+20,h:e.h})),a.add("road not found");break;case"501":e.triggered=!0,a.add("road not implemented");break;case"503":e.triggered=!0,a.add("road unavailable");break;case"fallingRoad":e.frame>e.sprites.length/2&&(e.triggered=!0,w.dying||(w.dying=!0,w.dyingTime=g));break;case"missingRoad":e.triggered=!0,w.dying||(w.dying=!0,w.dyingTime=g)}}),l=m.concat(l),a.forEach(e=>I(e)),l=l.filter(e=>Y+b.height+20>e.y)}var e,t})(),K=P)}function V(e){D=e,D?(K=Date.now(),Z()):cancelAnimationFrame(Q)}function $(e){return new Promise(t=>{var a=new Image;a.onload=()=>{t(a)},a.src=e})}onload=async()=>{document.title="Highway 404",onresize(),await(async e=>{s=await e(s)})($),F=await $(F),r("loading",R,b.width/2,b.height/2,1),q(),I=await(async()=>{let e=(await new Promise((e,t)=>{let a=0,n=setInterval(()=>{a+=1,speechSynthesis.getVoices().length?(e(speechSynthesis.getVoices()),clearInterval(n)):100>a||(t([]),clearInterval(n))},10)})).filter(e=>navigator.language===e.lang||RegExp("^"+navigator.language.split("-")[0]).test(e.lang));if(e.length){const n=(t=e)[(a=t.length-1,Math.floor(Math.random()*(a+1-0)+0))];return e=>{const t=o[e]||(o[e]=new SpeechSynthesisUtterance(e));t.voice=n,speechSynthesis.speak(t)}}var t,a;return()=>{}})(),[T]=[T].map(e=>((e,t,n,i=125)=>{let o,h,s,r,c,d,g,w,l,m,A,y,p,u,f,x,v=[],I=[],E=[],T=0,k=1,M={},X=44100/i*60>>2;for(;k;T++)v=[k=w=A=p=0],n.map((i,A)=>{for(g=t[i][T]||[0,0,0],k|=!!t[i][T],f=p+(t[i][0].length-2-!w)*X,h=2,r=p;g.length+(A==n.length-1)>h;w=++h){for(c=g[h],l=m!=(g[0]||0)|c|0,s=0;X>s&&w;s++>X-99&&l?y+=(1>y)/99:0)d=(1-y)*v[u++]/2||0,I[r]=(I[r]||0)+d*x-d,E[r]=(E[r++]||0)+d*x+d;c&&(y=c%1,x=g[1]||0,(c|=0)&&(v=M[[m=g[u=0]||0,c]]=M[[m,c]]||(o=[...e[m]],o[2]*=2**((c-12)/12),a(...o))))}p=f});return[I,E]})(...e)),W(),v.forEach((e,t)=>{let a=M.height;for(;a>0;)e.forEach(e=>{const n=J.highway[e][0];a-=n.h,X.drawImage(F,n.x,n.y,n.w,n.h,t*n.w,a,n.w,n.h)})}),(e=>{function t(){document.monetization.removeEventListener("monetizationstart",t),e()}document.monetization&&("started"===document.monetization.state?t():"pending"===document.monetization.state&&document.monetization.addEventListener("monetizationstart",t))})(N),V(!0)},onresize=onrotate=()=>{const e=Math.min(innerWidth/b.width,innerHeight/b.height);c.width=b.width*e,c.height=b.height*e,k.imageSmoothingEnabled=X.imageSmoothingEnabled=R.imageSmoothingEnabled=!1},document.onvisibilitychange=e=>{V(!e.target.hidden),D?(E=n(T),E.loop=!0):E.stop()},onkeydown=e=>{if(e.preventDefault(),!e.repeat)switch(x){case 1:switch(e.code){case"ArrowLeft":case"KeyA":case"KeyQ":w.moveX=-1;break;case"ArrowUp":case"KeyW":case"KeyZ":w.moveY=-1;break;case"ArrowRight":case"KeyD":w.moveX=1;break;case"ArrowDown":case"KeyS":w.moveY=1;break;case"KeyP":V(!D)}}},onkeyup=e=>{switch(x){case 0:e.which!==d[f]||10===f?B():(f++,10===f&&N());break;case 1:switch(e.code){case"ArrowLeft":case"KeyA":case"KeyQ":case"ArrowRight":case"KeyD":w.moveX=0;break;case"ArrowUp":case"KeyW":case"KeyZ":case"ArrowDown":case"KeyS":w.moveY=0}break;case 2:switch(e.code){case"KeyT":open("https://twitter.com/intent/tweet?text=viral%20marketing%20message%20https%3A%2F%2Fgoo.gl%2Fsome tiny Google url here","_blank");break;default:W(),x=0}}};let _=0,ee=0,te=0,ae=0;function ne(e){return[e.pageX||e.changedTouches[0].pageX,e.pageY||e.changedTouches[0].pageY]}ontouchstart=onpointerdown=e=>{switch(e.preventDefault(),x){case 1:[te,ae]=[_,ee]=ne(e)}},ontouchmove=onpointermove=e=>{switch(e.preventDefault(),x){case 1:_&&ee&&(([e,t])=>{e>te?(te=e,te-_>30&&(w.moveX=1)):_>e?(_=e,te-_>30&&(w.moveX=-1)):te>e&&w.moveX>0?(_=e,w.moveX=0):e>_&&0>w.moveX&&(te=e,w.moveX=0),t>ae?(ae=t,ae-ee>30&&(w.moveY=1)):ee>t?(ee=t,ae-ee>30&&(w.moveY=-1)):ae>t&&w.moveY>0?(ee=t,w.moveY=0):t>ee&&0>w.moveY&&(ae=t,w.moveY=0)})(ne(e))}},ontouchend=onpointerup=e=>{switch(e.preventDefault(),x){case 0:B();break;case 1:w.moveX=w.moveY=0,_=ee=te=ae=0;break;case 2:W(),x=0}}})();</script>