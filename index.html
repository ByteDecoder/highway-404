<style>body{margin:0;text-align:center;background:#000;touch-action:none}</style><canvas id=c></canvas><script>(()=>{const e=/iPhone|iPad|Android/i.test(navigator.userAgent);new(top.AudioContext||webkitAudioContext);let t="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANwAAAAFAQMAAAAUpRAlAAAABlBMVEUAAAD///+l2Z/dAAAAAXRSTlMAQObYZgAAAJxJREFUCNcBkQBu/wD/v8//8fhjCMXed5/4xjGP3Ed6X3/c4ACAyAKgAIxhKEIRIGUN5jGMYEjGKlCiyIZQgGMQEIDQBfAA/6Eecv8geQrWMo+cSMakISJBG/7wnPAAjiAIoACMYRhCMSRlCM48lEJIqqoiIkIEQYkiEBAAWRHwAI+f78Hx/+P4xdB8fEcR0Sfc7/hecR3iAICaIKCD0ULSdqTUvwAAAABJRU5ErkJggg==";function a(e,a,i,h,o=0,n=1){const c=5*n,r=e.length*c,s=2===o?r:1===o?r/2:0;[...e].forEach((e,o)=>{a.drawImage(t,5*"abcdefghijklmnopqrstuvwxyz0123456789.:!-%,/#".indexOf(e),0,5,5,i+o*(c+1)-s,h,c,c)})}const i=[38,38,40,40,37,39,37,39,66,65];let h,o,n,r,s,A,w,y=0,d=0;const g=[[0,6,6],[1,5,5,5],[2,5,5,5],[2,5,5,5],[2,5,5,5],[2,5,5,5],[3,5,5,5],[7,4,7]],m=c.getContext("2d"),l=c.cloneNode(),x=l.getContext("2d");l.width=160,l.height=400;const p=c.cloneNode(),f=p.getContext("2d");p.width=120,p.height=160;const u=p.width-20;let E=0,C=0;const v={hero:{sprites:[{x:0,y:0,w:10,h:20}],speed:{x:100,y:50}},roadFalling:{sprites:[{x:40,y:0,w:20,h:20},{x:60,y:0,w:20,h:20},{x:80,y:0,w:20,h:20},{x:100,y:0,w:20,h:20},{x:120,y:0,w:20,h:20},{x:140,y:0,w:20,h:20}]},highwayPanel:{sprites:[{x:0,y:40,w:l.width,h:40}]},highway:{0:[{x:0,y:20,w:20,h:20}],6:[{x:20,y:20,w:20,h:20}],1:[{x:40,y:20,w:20,h:20}],2:[{x:60,y:20,w:20,h:20}],3:[{x:80,y:20,w:20,h:20}],4:[{x:100,y:20,w:20,h:20}],7:[{x:120,y:20,w:20,h:20}],5:[{x:140,y:20,w:20,h:20}],speed:{y:200}}};let b,M,k,B,Y="data:image/png;base64,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",P=!0;function R(){y=0,h=404,E=0,C=l.height-p.height,s=0,A=[{distance:808,type:"404",lane:1},{distance:808,type:"404",lane:2},{distance:808,type:"404",lane:3},{distance:808,type:"404",lane:4},{distance:808,type:"404",lane:5},{distance:808,type:"404",lane:6}],w=!1,o=(()=>{const e=I("hero",p.width/2,l.height-50);return e.scale=1,e.rotate=0,e})(),n=[o,I("highwayPanel",0,l.height-p.height+10)],d=1}function I(e,t=0,a=0,i=!1){if(v[e]){const h=v[e].sprites[0];return{frame:0,frameTime:0,h:h.h,loopAnimation:i,moveX:0,moveY:0,speed:v[e].speed,sprites:v[e].sprites,type:e,w:h.w,x:t,y:a}}return{h:20,type:e,w:20,x:t,y:a}}function D(e){const t=I("roadFalling",e.x,e.y-e.h);return t.spawn=D,t}function K(e){if(e.frameTime+=M,e.frameTime>.1&&(e.frameTime-=.1,(e.sprites.length-1>e.frame||e.loopAnimation)&&(e.frame+=1),e.loopAnimation&&(e.frame%=e.sprites.length),e.dying&&(e.rotate+=Math.PI/4,e.scale-=.1,0>e.scale&&(e.dying=!1,e.dead=!0))),e.speed){const t=e.moveX&&e.moveY?.7071067811865476:1;e.x+=e.speed.x*M*e.moveX*t,e.y+=e.speed.y*M*e.moveY*t}}function Q(e){if(e.sprites){const t=e.sprites[e.frame];f.save(),f.translate(Math.round(e.x-E),Math.round(e.y-C));let a=0,i=0,h=e.scale||1;e.dying&&(f.rotate(e.rotate),a=-e.w/2*h,i=-e.h/2*h),f.drawImage(Y,t.x,t.y,t.w,t.h,a,i,t.w*h,t.h*h),f.restore()}else a(e.type,f,Math.round(e.x+10-E),Math.round(e.y-2.5-C),1)}function J(){P&&(B=requestAnimationFrame(J),(()=>{switch(f.drawImage(l,E,C,p.width,p.height,0,0,p.width,p.height),d){case 0:n.forEach(Q),a(e?"swipe to start":"press any key",f,p.width/2,(p.height+10)/2,1),10===y&&a("konami mode on",f,p.width-5,5,2),a("jerome lecomte",f,p.width/2,p.height-17,1),a("js13kgames 2020",f,p.width/2,p.height-10,1);break;case 1:a("highway 404",f,5,5),n.forEach(Q),(()=>{const e=Math.floor(Math.ceil(h)/60),t=Math.ceil(h)-60*e;a(`${e}:${t>9?"":"0"}${t}`,f,p.width-5,5,2)})();break;case 2:a("highway 404",f,5,5),a(w?"you arrived!":"you got lost!",f,p.width/2,p.height/2,1)}m.drawImage(p,0,0,p.width,p.height,0,0,c.width,c.height)})(),b=Date.now(),M=(b-k)/1e3,(()=>{switch(d){case 1:h-=M,0>h&&(w=!0,d=2),o.dead&&(w=!1,d=2),n.forEach(K),s+=(()=>{const e=v.highway.speed.y*M;return C-=e,o.y-=e,0>C&&(C+=l.height-p.height,n.forEach(e=>{e.y+=l.height-p.height})),e})(),20>(e=o).x?e.x=20:e.x>l.width-20-e.w&&(e.x=l.width-20-e.w),C+20>e.y?e.y=C+20:e.y>C+p.height-e.h&&(e.y=C+p.height-e.h),E>0&&E+20>o.x?E=Math.max(0,o.x-20):l.width-p.width>E&&o.x+o.w>E+u&&(E=Math.min(l.width-p.width,o.x+o.w-u)),r=[],(e=>{A=A.filter(t=>s>=t.distance||t.distance>=s+20||(e.push(I(t.type,20*t.lane-1,-20+C)),!1))})(r),n.forEach(e=>{e!==o&&((e,t)=>{const a={entity1MaxX:e.x+e.w,entity1MaxY:e.y+e.h,entity2MaxX:t.x+t.w,entity2MaxY:t.y+t.h};return a.collide=a.entity2MaxX>e.x&&a.entity1MaxX>t.x&&a.entity2MaxY>e.y&&a.entity1MaxY>t.y,a})(o,e).collide&&"404"===e.type&&r.push(D({x:e.x,y:e.y+10,h:e.h}))}),n=r.concat(n),n=n.filter(e=>C+p.height+20>e.y)}var e})(),k=b)}function S(e){P=e,P?(k=Date.now(),J()):cancelAnimationFrame(B)}function X(e){return new Promise(t=>{var a=new Image;a.onload=()=>{t(a)},a.src=e})}onload=async()=>{document.title="Highway 404",onresize(),await(async e=>{t=await e(t)})(X),Y=await X(Y),g.forEach((e,t)=>{let a=l.height;for(;a>0;)e.forEach(e=>{const i=v.highway[e][0];a-=i.h,x.drawImage(Y,i.x,i.y,i.w,i.h,t*i.w,a,i.w,i.h)})}),n=[I("hero",p.width/2,p.height-50),I("highwayPanel",0,10)],S(!0)},onresize=onrotate=()=>{const e=Math.min(innerWidth/p.width,innerHeight/p.height);c.width=p.width*e,c.height=p.height*e,m.imageSmoothingEnabled=x.imageSmoothingEnabled=f.imageSmoothingEnabled=!1},document.onvisibilitychange=e=>{S(!e.target.hidden)},onkeydown=e=>{if(e.preventDefault(),!e.repeat)switch(d){case 1:switch(e.code){case"ArrowLeft":case"KeyA":case"KeyQ":o.moveX=-1;break;case"ArrowUp":case"KeyW":case"KeyZ":o.moveY=-1;break;case"ArrowRight":case"KeyD":o.moveX=1;break;case"ArrowDown":case"KeyS":o.moveY=1;break;case"KeyP":S(!P)}}},onkeyup=e=>{switch(d){case 0:e.which!==i[y]||10===y?R():y++;break;case 1:switch(e.code){case"ArrowLeft":case"KeyA":case"KeyQ":case"ArrowRight":case"KeyD":o.moveX=0;break;case"ArrowUp":case"KeyW":case"KeyZ":case"ArrowDown":case"KeyS":o.moveY=0}break;case 2:switch(e.code){case"KeyT":open("https://twitter.com/intent/tweet?text=viral%20marketing%20message%20https%3A%2F%2Fgoo.gl%2Fsome tiny Google url here","_blank");break;default:d=0}}};let j=0,L=0,q=0,T=0;function U(e){return[e.pageX||e.changedTouches[0].pageX,e.pageY||e.changedTouches[0].pageY]}ontouchstart=onpointerdown=e=>{switch(e.preventDefault(),d){case 1:[q,T]=[j,L]=U(e)}},ontouchmove=onpointermove=e=>{switch(e.preventDefault(),d){case 1:j&&L&&(([e,t])=>{e>q?(q=e,q-j>30&&(o.moveX=1)):j>e?(j=e,q-j>30&&(o.moveX=-1)):q>e&&o.moveX>0?(j=e,o.moveX=0):e>j&&0>o.moveX&&(q=e,o.moveX=0),t>T?(T=t,T-L>30&&(o.moveY=1)):L>t?(L=t,T-L>30&&(o.moveY=-1)):T>t&&o.moveY>0?(L=t,o.moveY=0):t>L&&0>o.moveY&&(T=t,o.moveY=0)})(U(e))}},ontouchend=onpointerup=e=>{switch(e.preventDefault(),d){case 0:R();break;case 1:o.moveX=o.moveY=0,j=L=q=T=0;break;case 2:d=0}}})();</script>