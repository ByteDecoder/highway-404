<style>body{margin:0;text-align:center;background:#000;touch-action:none}</style><canvas id=c></canvas><script>(()=>{const e=/iPhone|iPad|Android/i.test(navigator.userAgent);new(top.AudioContext||webkitAudioContext);const t={};let a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANwAAAAFAQMAAAAUpRAlAAAABlBMVEUAAAD///+l2Z/dAAAAAXRSTlMAQObYZgAAAJxJREFUCNcBkQBu/wD/v8//8fhjCMXed5/4xjGP3Ed6X3/c4ACAyAKgAIxhKEIRIGUN5jGMYEjGKlCiyIZQgGMQEIDQBfAA/6Eecv8geQrWMo+cSMakISJBG/7wnPAAjiAIoACMYRhCMSRlCM48lEJIqqoiIkIEQYkiEBAAWRHwAI+f78Hx/+P4xdB8fEcR0Sfc7/hecR3iAICaIKCD0ULSdqTUvwAAAABJRU5ErkJggg==";function i(e,t,i,n,h=0,o=1){const s=5*o,r=e.length*s,c=2===h?r:1===h?r/2:0;[...e].forEach((e,h)=>{t.drawImage(a,5*"abcdefghijklmnopqrstuvwxyz0123456789.:!-%,/#".indexOf(e),0,5,5,i+h*(s+1)-c,n,s,s)})}const n=[38,38,40,40,37,39,37,39,66,65];let h,o,s,r,g,d,w,A,y=0,l=0;const p=[[0,6,6],[1,5,5,5],[2,5,5,5],[2,5,5,5],[2,5,5,5],[2,5,5,5],[3,5,5,5],[7,4,7]],m=c.getContext("2d"),f=c.cloneNode(),u=f.getContext("2d");f.width=160,f.height=400;const x=c.cloneNode(),v=x.getContext("2d");x.width=120,x.height=160;const b=x.width-20;let E=0,k=0;const C={hero:{sprites:[{x:0,y:0,w:10,h:20}],speed:{x:100,y:50}},fallingRoad:{sprites:[{x:40,y:0,w:20,h:20},{x:60,y:0,w:20,h:20},{x:80,y:0,w:20,h:20},{x:100,y:0,w:20,h:20},{x:120,y:0,w:20,h:20},{x:140,y:0,w:20,h:20}]},missingRoad:{sprites:[{x:140,y:0,w:20,h:20}]},highwayPanel:{sprites:[{x:0,y:40,w:f.width,h:40}]},highway:{0:[{x:0,y:20,w:20,h:20}],6:[{x:20,y:20,w:20,h:20}],1:[{x:40,y:20,w:20,h:20}],2:[{x:60,y:20,w:20,h:20}],3:[{x:80,y:20,w:20,h:20}],4:[{x:100,y:20,w:20,h:20}],7:[{x:120,y:20,w:20,h:20}],5:[{x:140,y:20,w:20,h:20}],speed:{y:200}}};let R,P,M,B,I="data:image/png;base64,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",Y=!0;function S(){y=0,h=404,E=0,k=f.height-x.height,g=0,d=[{distance:808,type:"404",lane:1},{distance:808,type:"404",lane:2},{distance:808,type:"404",lane:3},{distance:808,type:"501",lane:4,length:20},{distance:808,type:"501",lane:5,length:19},{distance:808,type:"501",lane:6,length:18},{distance:1700,type:"200",lane:1},{distance:1720,type:"200",lane:2},{distance:1740,type:"200",lane:3},{distance:1580,type:"503",lane:4,length:20},{distance:1560,type:"503",lane:5,length:19},{distance:1540,type:"503",lane:6,length:18},{distance:2400,type:"100",lane:1},{distance:2400,type:"100",lane:2},{distance:2400,type:"100",lane:3},{distance:2400,type:"100",lane:4},{distance:2400,type:"100",lane:5},{distance:2400,type:"100",lane:6}],w=!1,o=(()=>{const e=K("hero",x.width/2,f.height-50);return e.scale=1,e.rotate=0,e})(),s=[o,K("highwayPanel",0,f.height-x.height+10)],l=1}function D(e,t){return t.x+t.w>e.x+e.w/4&&e.x+3*e.w/4>t.x&&t.y+t.h>e.y+e.h/4&&e.y+3*e.h/4>t.y}function K(e,t=0,a=0,i=!1){if(C[e]){const n=C[e].sprites[0];return{frame:0,frameTime:0,h:n.h,loopAnimation:i,moveX:0,moveY:0,speed:C[e].speed,sprites:C[e].sprites,type:e,w:n.w,x:t,y:a}}return{h:20,type:e,w:20,x:t,y:a}}function Q(e){const t=K("fallingRoad",e.x,e.y-e.h);return t.spawn=Q,t.distance=g,t}function J(e){if(e.frameTime+=P,e.frameTime>.1&&(e.frameTime-=.1,(e.sprites.length-1>e.frame||e.loopAnimation)&&(e.frame+=1),e.loopAnimation&&(e.frame%=e.sprites.length),e.dying&&(e.rotate+=Math.PI/4,e.scale-=.1,0>e.scale&&(e.dying=!1,e.dead=!0))),e.speed){const t=e.moveX&&e.moveY?.7071067811865476:1;e.x+=e.speed.x*P*e.moveX*t,e.y+=e.speed.y*P*e.moveY*t}}function j(e){if(e.sprites){const t=e.sprites[e.frame];v.save(),v.translate(Math.round(e.x-E),Math.round(e.y-k));let a=0,i=0,n=e.scale||1;e.dying&&(v.rotate(e.rotate),a=-e.w/2*n,i=-e.h/2*n),v.drawImage(I,t.x,t.y,t.w,t.h,a,i,t.w*n,t.h*n),v.restore()}else i(e.type,v,Math.round(e.x+10-E),Math.round(e.y+e.h/2-2.5-k),1)}function L(){Y&&(B=requestAnimationFrame(L),(()=>{switch(v.drawImage(f,E,k,x.width,x.height,0,0,x.width,x.height),l){case 0:s.forEach(j),i(e?"swipe to start":"press any key",v,x.width/2,(x.height+10)/2,1),10===y&&i("konami mode on",v,x.width-5,5,2),i("jerome lecomte",v,x.width/2,x.height-17,1),i("js13kgames 2020",v,x.width/2,x.height-10,1);break;case 1:i("highway 404",v,5,5),s.forEach(j),(()=>{const e=Math.floor(Math.ceil(h)/60),t=Math.ceil(h)-60*e;i(`${e}:${t>9?"":"0"}${t}`,v,x.width-5,5,2)})();break;case 2:i("highway 404",v,5,5),i(w?"you arrived!":"you got lost!",v,x.width/2,x.height/2,1)}m.drawImage(x,0,0,x.width,x.height,0,0,c.width,c.height)})(),R=Date.now(),P=(R-M)/1e3,(()=>{switch(l){case 1:h-=P,0>h&&(w=!0,l=2),o.dead&&(w=!1,l=2),s.forEach(J),g+=(()=>{const e=C.highway.speed.y*P;return k-=e,o.y-=e,0>k&&(k+=f.height-x.height,s.forEach(e=>{e.y+=f.height-x.height})),e})(),20>(e=o).x?e.x=20:e.x>f.width-20-e.w&&(e.x=f.width-20-e.w),k+20>e.y?e.y=k+20:e.y>k+x.height-e.h&&(e.y=k+x.height-e.h),E>0&&E+20>o.x?E=Math.max(0,o.x-20):f.width-x.width>E&&o.x+o.w>E+b&&(E=Math.min(f.width-x.width,o.x+o.w-b)),r=[];const t=new Set;(e=>{d=d.filter(t=>{if(t.distance>g&&g+20>t.distance){e.push(K(t.type,20*t.lane,-20+k));for(let a=1;t.length>=a;a++)e.push(K("missingRoad",20*t.lane,-20*(a+2)+k));return!1}return!0})})(r),(()=>{const e=s.filter(e=>"200"===e.type);s.forEach(t=>{if(t.spawn&&g-t.distance>17){const a=t.spawn(t);r.push(a),t.spawn=null,e.forEach(e=>{D(a,e)&&(a.spawn=null)})}})})(),s.forEach(e=>{if(e!==o&&!e.triggered&&D(o,e))switch(e.type){case"100":e.triggered=!0,t.add("continue");break;case"200":e.triggered=!0,t.add("road OK");break;case"404":e.triggered=!0,r.push(Q({x:e.x,y:e.y+20,h:e.h})),t.add("road not found");break;case"501":e.triggered=!0,t.add("road not implemented");break;case"503":e.triggered=!0,t.add("road unavailable");break;case"fallingRoad":e.frame>e.sprites.length/2&&(o.dying=!0);break;case"missingRoad":o.dying=!0}}),s=r.concat(s),t.forEach(e=>A(e)),s=s.filter(e=>k+x.height+20>e.y)}var e})(),M=R)}function q(e){Y=e,Y?(M=Date.now(),L()):cancelAnimationFrame(B)}function U(e){return new Promise(t=>{var a=new Image;a.onload=()=>{t(a)},a.src=e})}onload=async()=>{document.title="Highway 404",onresize(),await(async e=>{a=await e(a)})(U),I=await U(I),A=await(async()=>{let e=(await new Promise((e,t)=>{let a=0,i=setInterval(()=>{a+=1,speechSynthesis.getVoices().length?(e(speechSynthesis.getVoices()),clearInterval(i)):100>a||(t([]),clearInterval(i))},10)})).filter(e=>navigator.language===e.lang||RegExp("^"+navigator.language.split("-")[0]).test(e.lang));if(e.length){const n=(a=e)[(i=a.length-1,Math.floor(Math.random()*(i+1-0)+0))];return e=>{const a=t[e]||(t[e]=new SpeechSynthesisUtterance(e));a.voice=n,speechSynthesis.speak(a)}}var a,i;return()=>{}})(),p.forEach((e,t)=>{let a=f.height;for(;a>0;)e.forEach(e=>{const i=C.highway[e][0];a-=i.h,u.drawImage(I,i.x,i.y,i.w,i.h,t*i.w,a,i.w,i.h)})}),s=[K("hero",x.width/2,x.height-50),K("highwayPanel",0,10)],q(!0)},onresize=onrotate=()=>{const e=Math.min(innerWidth/x.width,innerHeight/x.height);c.width=x.width*e,c.height=x.height*e,m.imageSmoothingEnabled=u.imageSmoothingEnabled=v.imageSmoothingEnabled=!1},document.onvisibilitychange=e=>{q(!e.target.hidden)},onkeydown=e=>{if(e.preventDefault(),!e.repeat)switch(l){case 1:switch(e.code){case"ArrowLeft":case"KeyA":case"KeyQ":o.moveX=-1;break;case"ArrowUp":case"KeyW":case"KeyZ":o.moveY=-1;break;case"ArrowRight":case"KeyD":o.moveX=1;break;case"ArrowDown":case"KeyS":o.moveY=1;break;case"KeyP":q(!Y)}}},onkeyup=e=>{switch(l){case 0:e.which!==n[y]||10===y?S():y++;break;case 1:switch(e.code){case"ArrowLeft":case"KeyA":case"KeyQ":case"ArrowRight":case"KeyD":o.moveX=0;break;case"ArrowUp":case"KeyW":case"KeyZ":case"ArrowDown":case"KeyS":o.moveY=0}break;case 2:switch(e.code){case"KeyT":open("https://twitter.com/intent/tweet?text=viral%20marketing%20message%20https%3A%2F%2Fgoo.gl%2Fsome tiny Google url here","_blank");break;default:l=0,s=[K("hero",x.width/2,x.height-50),K("highwayPanel",0,10)],k=f.height-x.height,E=0}}};let T=0,X=0,V=0,Z=0;function z(e){return[e.pageX||e.changedTouches[0].pageX,e.pageY||e.changedTouches[0].pageY]}ontouchstart=onpointerdown=e=>{switch(e.preventDefault(),l){case 1:[V,Z]=[T,X]=z(e)}},ontouchmove=onpointermove=e=>{switch(e.preventDefault(),l){case 1:T&&X&&(([e,t])=>{e>V?(V=e,V-T>30&&(o.moveX=1)):T>e?(T=e,V-T>30&&(o.moveX=-1)):V>e&&o.moveX>0?(T=e,o.moveX=0):e>T&&0>o.moveX&&(V=e,o.moveX=0),t>Z?(Z=t,Z-X>30&&(o.moveY=1)):X>t?(X=t,Z-X>30&&(o.moveY=-1)):Z>t&&o.moveY>0?(X=t,o.moveY=0):t>X&&0>o.moveY&&(Z=t,o.moveY=0)})(z(e))}},ontouchend=onpointerup=e=>{switch(e.preventDefault(),l){case 0:S();break;case 1:o.moveX=o.moveY=0,T=X=V=Z=0;break;case 2:l=0,s=[K("hero",x.width/2,x.height-50),K("highwayPanel",0,10)],k=f.height-x.height,E=0}}})();</script>